# Text Analyzer

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–µ–π –Ω–∞ –¥–µ–∑–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏.

**–°–æ—Å—Ç–∞–≤:**
- **Go-–±—ç–∫–µ–Ω–¥** ‚Äî HTTP API –Ω–∞ –ø–æ—Ä—Ç—É 8080, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ –ò–ò
- **Next.js-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å SSE-—Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Chrome-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** ‚Äî –∞–Ω–∞–ª–∏–∑ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û–±—â–∏–π –ø–æ—Ç–æ–∫

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç URL –∏–ª–∏ —Ç–µ–∫—Å—Ç
        ‚Üì
POST /api/analyze/stream
        ‚Üì
–ï—Å–ª–∏ URL ‚Üí ContentFetcher —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ –æ—á–∏—â–∞–µ—Ç HTML
        ‚Üì
–ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω Serper ‚Üí –ø–æ–∏—Å–∫ —Ñ–∞–∫—Ç–æ–≤ –≤ Google (RU/EN/RO)
        ‚Üì
–ò–ò-–º–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ 8-—à–∞–≥–æ–≤–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É
        ‚Üì
SSE-–ø–æ—Ç–æ–∫: start ‚Üí progress ‚Üí result ‚Üí done
        ‚Üì
–ï—Å–ª–∏ –æ—Ü–µ–Ω–∫–∞ ‚â§ 7 ‚Üí –≥–ª—É–±–æ–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ–∏—Å–∫ –æ–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω–∏–π)
        ‚Üì
–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –æ—Ü–µ–Ω–∫–∞, –≤–µ—Ä–¥–∏–∫—Ç, –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
openrouter-web/
‚îú‚îÄ‚îÄ main.go                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ä–æ—É—Ç–∏–Ω–≥, –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ analyzer.go              # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç—Ä—ë—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.go              # –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞
‚îÇ   ‚îú‚îÄ‚îÄ fetcher.go               # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ HTML –ø–æ URL
‚îÇ   ‚îú‚îÄ‚îÄ groq.go                  # –ò–ò-–∫–ª–∏–µ–Ω—Ç Groq API
‚îÇ   ‚îú‚îÄ‚îÄ openrouter.go            # –ò–ò-–∫–ª–∏–µ–Ω—Ç OpenRouter (+ backup-–º–æ–¥–µ–ª—å)
‚îÇ   ‚îú‚îÄ‚îÄ lmstudio.go              # –ò–ò-–∫–ª–∏–µ–Ω—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ LM Studio
‚îÇ   ‚îú‚îÄ‚îÄ serper.go                # –ü–æ–∏—Å–∫ —Ñ–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ Google Serper API
‚îÇ   ‚îî‚îÄ‚îÄ prompt_loader.go         # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ analysis.go              # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ config.go                # –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ prompts.json             # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò
‚îú‚îÄ‚îÄ .env                         # API-–∫–ª—é—á–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å)
‚îú‚îÄ‚îÄ frontend/                    # Next.js 16 + React 19 + Tailwind v4
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.js              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ('use client')
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.js            # Root layout
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css          # –¢—ë–º–Ω–∞—è —Ç–µ–º–∞, @import "tailwindcss"
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InputForm.js         # Textarea + –∫–Ω–æ–ø–∫–∏ –ê–Ω–∞–ª–∏–∑/–°—Ç–æ–ø
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventLog.js          # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä SSE-—Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventRow.js          # –°—Ç—Ä–æ–∫–∞ —Å–æ–±—ã—Ç–∏—è —Å –±–µ–π–¥–∂–µ–º –∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResultCard.js        # –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StatusBar.js         # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useAnalyzer.js       # SSE —á–µ—Ä–µ–∑ fetch + ReadableStream
‚îÇ   ‚îî‚îÄ‚îÄ next.config.mjs          # –ü—Ä–æ–∫—Å–∏ /api/* ‚Üí localhost:8080
‚îî‚îÄ‚îÄ extension/                   # Chrome Extension MV3
    ‚îú‚îÄ‚îÄ manifest.json
    ‚îú‚îÄ‚îÄ background.js            # Service worker: –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
    ‚îú‚îÄ‚îÄ content.js               # –ò–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É: –æ–≤–µ—Ä–ª–µ–π + —Å–∫–∞–Ω
    ‚îú‚îÄ‚îÄ popup.html               # UI –ø–æ–ø–∞–ø–∞ (4 —Å–æ—Å—Ç–æ—è–Ω–∏—è)
    ‚îú‚îÄ‚îÄ popup.css                # –°—Ç–∏–ª–∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã
    ‚îî‚îÄ‚îÄ popup.js                 # –õ–æ–≥–∏–∫–∞ –ø–æ–ø–∞–ø–∞: —Å–∫–∞–Ω ‚Üí SSE-–∞–Ω–∞–ª–∏–∑
```

---

## –ó–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Go 1.21+
- Node.js 18+
- –ö–ª—é—á Groq API (–∏–ª–∏ OpenRouter / –ª–æ–∫–∞–ª—å–Ω–∞—è LM Studio)

### .env —Ñ–∞–π–ª

```env
# –í—ã–±–æ—Ä –ò–ò-–±—ç–∫–µ–Ω–¥–∞ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω true)
USE_GROQ=true
USE_LM_STUDIO=false

# Groq
GROQ_API_KEY=gsk_...
GROQ_MODEL=llama-3.3-70b-versatile

# OpenRouter (–µ—Å–ª–∏ USE_GROQ=false)
OPENROUTER_API_KEY=sk-or-...
OPENROUTER_MODEL=nvidia/nemotron-3-nano-30b-a3b:free
OPENROUTER_MODEL_BACKUP=         # –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, fallback-–º–æ–¥–µ–ª—å

# LM Studio (–µ—Å–ª–∏ USE_LM_STUDIO=true)
LM_STUDIO_URL=http://localhost:1234
LM_STUDIO_MODEL=local-model

# –°–µ—Ä–ø–µ—Ä (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî –ø–æ–∏—Å–∫ —Ñ–∞–∫—Ç–æ–≤ –≤ Google)
SERPER_API_KEY=...

PORT=8080
```

### –ë—ç–∫–µ–Ω–¥

```bash
cd D:/project/openrouter-web
go run main.go
# ‚Üí –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :8080
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥

```bash
cd D:/project/openrouter-web/frontend
npm install
npm run dev
# ‚Üí http://localhost:3000
```

### Chrome-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

1. –û—Ç–∫—Ä—ã—Ç—å `chrome://extensions/`
2. –í–∫–ª—é—á–∏—Ç—å **–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**
3. **–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–µ** ‚Üí –≤—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É `extension/`
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ `localhost:8080`

---

## API

### `POST /api/analyze/stream`
–û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç. SSE-–ø–æ—Ç–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{ "text": "—Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞" }
// –ò–õ–ò
{ "url": "https://example.com/article" }
```

**SSE-—Å–æ–±—ã—Ç–∏—è:**

| –°–æ–±—ã—Ç–∏–µ   | –î–∞–Ω–Ω—ã–µ                     | –¶–≤–µ—Ç   |
|-----------|----------------------------|--------|
| `start`   | –°—Ç—Ä–æ–∫–∞-—Å–æ–æ–±—â–µ–Ω–∏–µ           | –°–∏–Ω–∏–π  |
| `progress`| –°—Ç—Ä–æ–∫–∞-—Å–æ–æ–±—â–µ–Ω–∏–µ –æ —à–∞–≥–µ    | –ó–µ–ª—ë–Ω—ã–π|
| `result`  | JSON —Å –ø–æ–ª–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º  | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π |
| `done`    | –°—Ç—Ä–æ–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è          | –û—Ä–∞–Ω–∂–µ–≤—ã–π |
| `error`   | –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏            | –ö—Ä–∞—Å–Ω—ã–π |

### `POST /api/analyze`
–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π JSON –±–µ–∑ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞.

### `GET /api/health`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±—ç–∫–µ–Ω–¥–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status": "ok"}`.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```json
{
  "summary": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è",
  "source_url": "https://...",
  "credibility_score": 4,
  "reasoning": "–ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏",
  "manipulations": [
    "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ñ–∞–∫—Ç–∞–º–∏",
    "–ù–∞–≤–µ—à–∏–≤–∞–Ω–∏–µ —è—Ä–ª—ã–∫–æ–≤ –±–µ–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤"
  ],
  "logical_issues": [
    "–õ–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–≤—è–∑—å –≤ –∞–±–∑–∞—Ü–µ 3"
  ],
  "fact_check": {
    "verifiable_facts": ["–§–∞–∫—Ç 1 –ø–æ–¥–¥–∞—é—â–∏–π—Å—è –ø—Ä–æ–≤–µ—Ä–∫–µ"],
    "opinions_as_facts": ["–ú–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ –∫–∞–∫ —Ñ–∞–∫—Ç"],
    "missing_evidence": ["–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±–µ–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞"]
  },
  "sources": [
    { "name": "Reuters", "url": "https://reuters.com", "description": "–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤" }
  ],
  "verification": {
    "is_fake": true,
    "reasons": ["–ü—Ä–∏—á–∏–Ω–∞ 1", "–ü—Ä–∏—á–∏–Ω–∞ 2"],
    "real_information": "–ß—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ"
  }
}
```

### –®–∫–∞–ª–∞ –æ—Ü–µ–Ω–∫–∏

| –û—Ü–µ–Ω–∫–∞ | –í–µ—Ä–¥–∏–∫—Ç                  | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä |
|--------|--------------------------|-----------|
| 0‚Äì3    | –í–µ—Ä–æ—è—Ç–Ω–∞—è –¥–µ–∑–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  | üî¥ –ö—Ä–∞—Å–Ω—ã–π |
| 4‚Äì6    | –°–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç     | üü° –ñ—ë–ª—Ç—ã–π |
| 7‚Äì10   | –î–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç      | üü¢ –ó–µ–ª—ë–Ω—ã–π |

**–õ–æ–≥–∏–∫–∞ –æ—Ü–µ–Ω–∫–∏:** –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–ª 5/10 (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π). –ö–∞–∂–¥–∞—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è/–Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚àí0.5, –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ ‚àí1, —Ñ–∞–∫—Ç —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º +0.5, –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ +1. –û—Ü–µ–Ω–∫–∞ 8+ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—É—á–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π –∏–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---

## –ò–ò-–∞–Ω–∞–ª–∏–∑: 8-—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

1. **–ö—Ä–∞—Ç–∫–∏–π –ø–µ—Ä–µ—Å–∫–∞–∑** ‚Äî —Ü–µ–ª—å —Ç–µ–∫—Å—Ç–∞: –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å / —É–±–µ–¥–∏—Ç—å / –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å / –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∞
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∫—Ç–æ–≤** ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –ø–æ–¥–¥–∞—é—â–∏–µ—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏** ‚Äî —Ç–µ—Ö–Ω–∏–∫–∏ —Å —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞
4. **–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** ‚Äî –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è, –ª–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–Ω–æ—Å—Ç—å
5. **–í–µ—Ä–¥–∏–∫—Ç** ‚Äî –ø–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏
6. **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏** ‚Äî —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
7. **–ê–Ω–∞–ª–∏–∑ —Ü–∏—Ç–∏—Ä—É–µ–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** ‚Äî —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–∏ –æ–Ω–∏ –∏ –≥–æ–≤–æ—Ä—è—Ç –ª–∏ —Ç–æ, —á—Ç–æ –∑–∞—è–≤–ª–µ–Ω–æ
8. **–§–∏–Ω–∞–ª—å–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç** ‚Äî –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ ‚â§5 —á—ë—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏

**–û–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏:** —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —è–∑—ã–∫, –Ω–∞–≤–µ—à–∏–≤–∞–Ω–∏–µ —è—Ä–ª—ã–∫–æ–≤, –ª–æ–∂–Ω–∞—è –¥–∏–ª–µ–º–º–∞, –ø–æ–¥–º–µ–Ω–∞ –ø–æ–Ω—è—Ç–∏–π, –∞–ø–µ–ª–ª—è—Ü–∏—è –∫ —ç–º–æ—Ü–∏—è–º, –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ–±–æ–±—â–µ–Ω–∏—è, –≤—ã—Ä–≤–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ü–∏—Ç–∞—Ç—ã, –∞–ø–µ–ª–ª—è—Ü–∏—è –∫ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç—É, –æ–±—Ä–∞–∑ –≤—Ä–∞–≥–∞, ¬´—Å–∫–æ–ª—å–∑–∫–∏–π —Å–∫–ª–æ–Ω¬ª.

**–û–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:** —Å–∞–º–æ–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ, –ª–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–Ω–æ—Å—Ç—å, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –≤–º–µ—Å—Ç–æ –ø—Ä–∏—á–∏–Ω–Ω–æ—Å—Ç–∏, –ø–æ—Ä–æ—á–Ω—ã–π –∫—Ä—É–≥, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –¥–≤–æ–π–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã.

---

## Chrome-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∂–∏–º URL (–∫–Ω–æ–ø–∫–∞ –≤ –ø–æ–ø–∞–ø–µ)

```
–ö–ª–∏–∫ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"
        ‚Üì
chrome.scripting.executeScript ‚Üí content.js –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –≤–∫–ª–∞–¥–∫—É
        ‚Üì
content.js:
  ‚Ä¢ –°–æ–∑–¥–∞—ë—Ç –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç—ë–º–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  ‚Ä¢ –°–∏–Ω—è—è —Å–≤–µ—Ç—è—â–∞—è—Å—è –ª–∏–Ω–∏—è –¥–≤–∏–∂–µ—Ç—Å—è —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑
  ‚Ä¢ –ù–∞—Ö–æ–¥–∏—Ç: h1-h4, p, blockquote, figcaption (–º–∏–Ω–∏–º—É–º 25 —Å–∏–º–≤–æ–ª–æ–≤)
  ‚Ä¢ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç: nav, header, footer, aside, —Ä–µ–∫–ª–∞–º–∞, –∫—É–∫–∏-–±–∞–Ω–Ω–µ—Ä—ã,
               –ø–æ–¥–ø–∏—Å–∫–∏, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏, sidebar, –≤–∏–¥–∂–µ—Ç—ã
  ‚Ä¢ –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –ª–∏–Ω–∏–∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è —Å–∏–Ω–∏–º –∫–æ–Ω—Ç—É—Ä–æ–º
  ‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç chunk-—Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ–ø–∞–ø
        ‚Üì
popup.js –ø–æ–ª—É—á–∞–µ—Ç —á–∞–Ω–∫–∏ ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–µ–Ω—Ç—É [H1]/[¬ß]/[H2] —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        ‚Üì
–°–∫–∞–Ω –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí POST /api/analyze/stream —Å {text: –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π_—Ç–µ–∫—Å—Ç}
        ‚Üì
SSE-–∞–Ω–∞–ª–∏–∑ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### –†–µ–∂–∏–º –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é)

```
–í—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç ‚Üí –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å: ¬´...¬ª"
        ‚Üì
background.js —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ chrome.storage.session
        ‚Üì
–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è popup.html?autostart=1 (–æ–∫–Ω–æ 440√ó600)
        ‚Üì
popup.js —á–∏—Ç–∞–µ—Ç pendingText ‚Üí —Å—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ—Ç SSE-–∞–Ω–∞–ª–∏–∑
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–ü–æ—á–µ–º—É SSE —á–µ—Ä–µ–∑ fetch –≤–º–µ—Å—Ç–æ EventSource**
–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π `EventSource` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ GET-–∑–∞–ø—Ä–æ—Å—ã. –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (—Ç–µ–∫—Å—Ç, URL) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `fetch` —Å —Ä—É—á–Ω—ã–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º `ReadableStream`.

**–ü–æ—á–µ–º—É —Ç–µ–∫—Å—Ç, –∞ –Ω–µ URL –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏**
–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏ (content.js) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–∂–µ —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –±—ç–∫–µ–Ω–¥—É. –≠—Ç–æ –æ–±—Ö–æ–¥–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ fetcher.go (–º–∏–Ω–∏–º—É–º 400 —Å–∏–º–≤–æ–ª–æ–≤) –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ç–∫–µ–Ω–¥ –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å.

**–ü–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ –ò–ò-–±—ç–∫–µ–Ω–¥—ã**
–û–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`AIClient`) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç—Ä–µ–º—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏: Groq (–±—ã—Å—Ç—Ä—ã–π), OpenRouter (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ + failover), LM Studio (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞). –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `.env`.

**–ì–ª—É–±–æ–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è**
–ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ ‚â§7 —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏—â–µ—Ç –∏—Ö –æ–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Google (RU/EN/RO). –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è¬ª.
