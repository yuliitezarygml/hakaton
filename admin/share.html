<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî ANALYST</title>
    <meta name="description" content="–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ç—å–∏ –Ω–∞ –¥–µ–∑–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Bebas+Neue&display=swap"
        rel="stylesheet">
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        :root {
            --bg: #070910;
            --surface: #0c0f1a;
            --surface2: #111520;
            --border: rgba(240, 160, 0, 0.10);
            --border-hi: rgba(240, 160, 0, 0.38);
            --amber: #f0a000;
            --amber-glow: rgba(240, 160, 0, 0.07);
            --green: #00c96e;
            --green-dim: rgba(0, 201, 110, 0.12);
            --red: #ff3355;
            --red-dim: rgba(255, 51, 85, 0.12);
            --yellow: #f0c000;
            --yellow-dim: rgba(240, 192, 0, 0.12);
            --text: #e2e8f0;
            --text-hi: #ffffff;
            --text-lo: #94a3b8;
            --mono: 'IBM Plex Mono', monospace;
            --display: 'Bebas Neue', sans-serif;
        }

        html,
        body {
            height: 100%
        }

        body {
            font-family: var(--mono);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-x: hidden;
        }

        /* Grid bg */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background-image:
                linear-gradient(rgba(240, 160, 0, .025) 1px, transparent 1px),
                linear-gradient(90deg, rgba(240, 160, 0, .025) 1px, transparent 1px);
            background-size: 44px 44px;
            pointer-events: none;
            z-index: 0;
        }

        /* Scanlines */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, .12) 2px, rgba(0, 0, 0, .12) 4px);
            pointer-events: none;
            z-index: 9999;
        }

        /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
        .hdr {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.75rem;
            height: 52px;
            border-bottom: 1px solid var(--border);
            background: rgba(12, 15, 26, .85);
            backdrop-filter: blur(12px);
            position: sticky;
            top: 0;
            z-index: 100;
            flex-shrink: 0;
            position: relative;
        }

        .hdr-left {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .logo {
            font-family: var(--display);
            font-size: 1.35rem;
            letter-spacing: .14em;
            color: var(--amber);
            text-decoration: none;
        }

        .logo span {
            font-family: var(--mono);
            font-size: .65rem;
            color: var(--text-lo);
            letter-spacing: .12em;
            margin-left: .4rem;
            vertical-align: middle;
        }

        .hdr-right {
            display: flex;
            align-items: center;
            gap: 2rem;
            font-size: .62rem;
            letter-spacing: .1em;
            color: var(--text-lo);
        }

        .hdr-right .lbl {
            color: var(--amber);
            margin-right: .25rem;
        }

        /* ‚îÄ‚îÄ Page content ‚îÄ‚îÄ */
        .page {
            position: relative;
            z-index: 1;
            flex: 1;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 2.5rem 1.5rem 4rem;
        }

        .container {
            width: 100%;
            max-width: 780px;
            animation: fadein .35s ease both;
        }

        @keyframes fadein {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ‚îÄ‚îÄ Loading / Error states ‚îÄ‚îÄ */
        .state-box {
            border: 1px solid var(--border);
            background: var(--surface);
            padding: 3rem 2rem;
            text-align: center;
        }

        .state-box .spin {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-hi);
            border-top-color: var(--amber);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .state-box .msg {
            font-size: .72rem;
            letter-spacing: .16em;
            color: var(--text-lo);
            text-transform: uppercase;
        }

        .state-box.error .msg {
            color: var(--red);
        }

        /* ‚îÄ‚îÄ Score header ‚îÄ‚îÄ */
        .result-header {
            border: 1px solid var(--border);
            background: var(--surface);
            padding: 2rem 2.5rem;
            margin-bottom: .85rem;
            position: relative;
            overflow: hidden;
        }

        .result-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--score-color, var(--amber)), transparent);
        }

        .rh-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .score-number {
            font-family: var(--display);
            font-size: 5.5rem;
            line-height: 1;
            letter-spacing: .02em;
            color: var(--score-color, var(--amber));
        }

        .score-denom {
            font-size: .9rem;
            color: var(--text-lo);
            vertical-align: super;
        }

        .score-bar-wrap {
            margin-top: .75rem;
            display: flex;
            align-items: center;
            gap: .85rem;
        }

        .score-bar-bg {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, .06);
            position: relative;
            max-width: 200px;
        }

        .score-bar-fill {
            height: 100%;
            background: var(--score-color, var(--amber));
            width: 0;
            transition: width .8s cubic-bezier(.16, 1, .3, 1);
        }

        .score-bar-label {
            font-size: .58rem;
            letter-spacing: .22em;
            color: var(--text-lo);
            text-transform: uppercase;
        }

        .verdict-block {
            text-align: right;
        }

        .verdict-tag {
            display: inline-block;
            font-size: .62rem;
            font-weight: 600;
            letter-spacing: .22em;
            text-transform: uppercase;
            padding: .4rem 1rem;
            border: 1px solid var(--score-color, var(--amber));
            color: var(--score-color, var(--amber));
            background: rgba(0, 0, 0, .3);
            margin-bottom: .75rem;
        }

        .verdict-text {
            font-size: .72rem;
            color: var(--text-lo);
            letter-spacing: .06em;
            max-width: 280px;
            line-height: 1.6;
            text-align: right;
        }

        /* ‚îÄ‚îÄ Summary panel ‚îÄ‚îÄ */
        .panel {
            border: 1px solid var(--border);
            background: var(--surface);
            margin-bottom: .85rem;
        }

        .panel-hdr {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: .85rem 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .panel-title {
            font-size: .6rem;
            letter-spacing: .28em;
            color: var(--amber);
            text-transform: uppercase;
        }

        .panel-body {
            padding: 1.4rem 1.5rem;
            font-size: .8rem;
            line-height: 1.8;
            color: var(--text);
        }

        /* ‚îÄ‚îÄ Tag lists ‚îÄ‚îÄ */
        .tag-list {
            padding: 1.2rem 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
        }

        .tag {
            display: inline-block;
            font-size: .66rem;
            letter-spacing: .04em;
            padding: .35rem .85rem;
            border: 1px solid var(--border-hi);
            background: var(--surface2);
            color: var(--text);
            line-height: 1.5;
        }

        .tag.manip {
            border-color: rgba(255, 51, 85, .3);
            background: var(--red-dim);
            color: #fca5a5;
        }

        .tag.logic {
            border-color: rgba(240, 160, 0, .3);
            background: var(--amber-glow);
            color: #fcd34d;
        }

        .tag.missing {
            border-color: rgba(148, 163, 184, .2);
            background: rgba(148, 163, 184, .05);
            color: var(--text-lo);
        }

        .empty-note {
            padding: 1.2rem 1.5rem;
            font-size: .68rem;
            color: var(--text-lo);
            letter-spacing: .1em;
        }

        /* ‚îÄ‚îÄ Score breakdown ‚îÄ‚îÄ */
        .breakdown {
            padding: 1.2rem 1.5rem;
            font-size: .72rem;
            font-family: var(--mono);
            color: var(--text-lo);
            line-height: 1.9;
            border-top: 1px solid var(--border);
        }

        .breakdown .plus {
            color: var(--green);
        }

        .breakdown .minus {
            color: var(--red);
        }

        .breakdown .total {
            color: var(--amber);
            font-weight: 600;
        }

        /* ‚îÄ‚îÄ Evidence ‚îÄ‚îÄ */
        .evidence-grid { display: flex; flex-direction: column; gap: .55rem; padding: .85rem 1.5rem 1.2rem; }
        .ev-block { border: 1px solid var(--border); background: var(--surface2); padding: .85rem 1.1rem; }
        .ev-label {
            font-size: .54rem;
            font-weight: 600;
            letter-spacing: .22em;
            text-transform: uppercase;
            color: #f97316;
            margin-bottom: .45rem;
        }
        .ev-text {
            font-size: .74rem;
            color: var(--text-lo);
            line-height: 1.75;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .ev-real {
            border-left: 2px solid rgba(249,115,22,.3);
            padding-left: .75rem;
        }
        .ev-reason {
            font-size: .72rem;
            color: #fb923c;
            padding: .2rem 0;
            line-height: 1.5;
        }
        .ev-reason::before { content: '‚ö† '; }

        /* ‚îÄ‚îÄ Sources ‚îÄ‚îÄ */
        .source-item {
            padding: .9rem 1.2rem;
            border: 1px solid var(--border);
            background: var(--surface2);
            margin-bottom: .45rem;
            display: flex;
            flex-direction: column;
            gap: .35rem;
        }
        .source-domain {
            font-size: .58rem;
            font-weight: 600;
            letter-spacing: .14em;
            color: #38bdf8;
            background: rgba(56,189,248,.07);
            border: 1px solid rgba(56,189,248,.2);
            padding: .15rem .55rem;
            display: inline-block;
            align-self: flex-start;
        }
        .source-title {
            font-size: .78rem;
            color: #7dd3fc;
            text-decoration: none;
            line-height: 1.5;
            word-break: break-word;
        }
        .source-title:hover { color: #38bdf8; text-decoration: underline; }
        .source-evidence {
            font-size: .7rem;
            color: var(--text-lo);
            line-height: 1.65;
            padding-left: .75rem;
            border-left: 2px solid rgba(56,189,248,.18);
        }
        .source-url {
            font-size: .62rem;
            color: #2a4a5e;
            word-break: break-all;
            font-family: var(--mono);
        }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        .footer-bar {
            border: 1px solid var(--border);
            background: var(--surface);
            padding: 1.2rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: .85rem;
        }

        .footer-brand {
            font-size: .58rem;
            letter-spacing: .22em;
            color: var(--text-lo);
            text-transform: uppercase;
        }

        .footer-brand span {
            color: var(--amber);
        }

        .footer-cta {
            display: inline-block;
            padding: .55rem 1.4rem;
            border: 1px solid var(--amber);
            color: var(--amber);
            font-family: var(--mono);
            font-size: .62rem;
            letter-spacing: .2em;
            text-transform: uppercase;
            text-decoration: none;
            transition: background .15s, box-shadow .15s;
        }

        .footer-cta:hover {
            background: var(--amber-glow);
            box-shadow: 0 0 18px rgba(240, 160, 0, .12);
        }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 600px) {
            .rh-top {
                flex-direction: column;
            }

            .verdict-block {
                text-align: left;
            }

            .verdict-text {
                text-align: left;
            }

            .score-number {
                font-size: 4rem;
            }

            .hdr-right {
                display: none;
            }
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="hdr" style="position:sticky;top:0;z-index:100">
        <div class="hdr-left">
            <a href="/" class="logo">ANALYST <span>// SHARE</span></a>
        </div>
        <div class="hdr-right">
            <span><span class="lbl">MODULE:</span>FACT-CHECK</span>
            <span id="hdr-clock"></span>
        </div>
    </header>

    <!-- Content -->
    <div class="page">
        <div class="container" id="container">
            <div class="state-box" id="loading">
                <div class="spin"></div>
                <div class="msg">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...</div>
            </div>
        </div>
    </div>

    <script>
        // Clock
        function updateClock() {
            const el = document.getElementById('hdr-clock');
            if (el) el.textContent = new Date().toLocaleTimeString('en-GB');
        }
        setInterval(updateClock, 1000);
        updateClock();

        function esc(s) {
            return String(s || '')
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;');
        }

        function scoreColor(s) {
            if (s >= 7) return 'var(--green)';
            if (s >= 4) return 'var(--yellow)';
            return 'var(--red)';
        }

        function scoreLabel(s) {
            if (s >= 7) return '–î–û–°–¢–û–í–ï–†–ù–û';
            if (s >= 4) return '–°–û–ú–ù–ò–¢–ï–õ–¨–ù–û';
            return '–î–ï–ó–ò–ù–§–û–†–ú–ê–¶–ò–Ø';
        }

        function renderTags(items, cls) {
            if (!items || items.length === 0) return '';
            return items.map(t => `<span class="tag ${cls}">${esc(t)}</span>`).join('');
        }

        function renderEvidence(d) {
            const breakdown = (d.score_breakdown || '').trim();
            const reasoning = (d.reasoning || '').trim();
            const verdictEx = (d.verdict_explanation || '').trim();
            const fakeReasons = d.verification?.fake_reasons || [];
            const realInfo = (d.verification?.real_information || '').trim();

            if (!breakdown && !reasoning && !verdictEx && !fakeReasons.length && !realInfo) return '';

            let blocks = '';
            if (breakdown) blocks += `<div class="ev-block"><div class="ev-label">–†–∞—Å—á—ë—Ç –æ—Ü–µ–Ω–∫–∏</div><div class="ev-text">${esc(breakdown)}</div></div>`;
            if (reasoning) blocks += `<div class="ev-block"><div class="ev-label">–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ</div><div class="ev-text">${esc(reasoning)}</div></div>`;
            if (verdictEx)  blocks += `<div class="ev-block"><div class="ev-label">–í–µ—Ä–¥–∏–∫—Ç</div><div class="ev-text">${esc(verdictEx)}</div></div>`;
            if (fakeReasons.length) {
                const items = fakeReasons.map(r => `<div class="ev-reason">${esc(r)}</div>`).join('');
                blocks += `<div class="ev-block"><div class="ev-label">–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º</div>${items}</div>`;
            }
            if (realInfo) blocks += `<div class="ev-block"><div class="ev-label">–ß—Ç–æ –Ω–∞—à–ª–∏ –≤ —Å–µ—Ç–∏</div><div class="ev-text ev-real">${esc(realInfo)}</div></div>`;

            return `<div class="panel">
                <div class="panel-hdr"><span class="panel-title">üî¨ –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</span></div>
                <div class="evidence-grid">${blocks}</div>
            </div>`;
        }

        function extractSources(d) {
            const raw = d.verification?.verified_sources || d.sources || [];
            if (!Array.isArray(raw)) return [];
            return raw.map(s => {
                if (typeof s === 'string') return { title: s, url: s, description: '' };
                return { title: s.title || '', url: s.url || '', description: s.description || '' };
            }).filter(s => { try { new URL(s.url); return true; } catch { return false; } });
        }

        function renderSources(d) {
            const sources = extractSources(d);
            if (!sources.length) return '';
            const items = sources.map(s => {
                let domain = '';
                try { domain = new URL(s.url).hostname.replace(/^www\./, ''); } catch {}
                return `<div class="source-item">
                    ${domain ? `<span class="source-domain">${esc(domain)}</span>` : ''}
                    <a class="source-title" href="${esc(s.url)}" target="_blank" rel="noopener noreferrer">${esc(s.title || s.url)}</a>
                    ${s.description ? `<div class="source-evidence">${esc(s.description)}</div>` : ''}
                    <div class="source-url">${esc(s.url)}</div>
                </div>`;
            }).join('');
            return `<div class="panel">
                <div class="panel-hdr">
                    <span class="panel-title">üìé –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏</span>
                    <span style="font-size:.58rem;color:var(--text-lo)">${sources.length} –∏—Å—Ç–æ—á–Ω–∏–∫(–æ–≤)</span>
                </div>
                <div style="padding:.85rem 1.5rem">${items}</div>
            </div>`;
        }

        function render(d) {
            const s = d.credibility_score || 0;
            const color = scoreColor(s);
            const verdict = d.final_verdict || scoreLabel(s);
            const container = document.getElementById('container');

            // Build breakdown lines
            let breakdownHtml = '';
            if (d.score_breakdown) {
                breakdownHtml = `<div class="breakdown">${esc(d.score_breakdown)}</div>`;
            }

            // Manipulations
            const manipTags = renderTags(d.manipulations, 'manip');
            const manipHtml = `
        <div class="panel">
            <div class="panel-hdr"><span class="panel-title">‚ö† –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏</span><span style="font-size:.58rem;color:var(--text-lo)">${(d.manipulations || []).length} –Ω–∞–π–¥–µ–Ω–æ</span></div>
            ${manipTags
                    ? `<div class="tag-list">${manipTags}</div>`
                    : '<div class="empty-note">–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã</div>'}
        </div>`;

            // Logical issues
            const logicTags = renderTags(d.logical_issues, 'logic');
            const logicHtml = `
        <div class="panel">
            <div class="panel-hdr"><span class="panel-title">üîç –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏</span><span style="font-size:.58rem;color:var(--text-lo)">${(d.logical_issues || []).length} –Ω–∞–π–¥–µ–Ω–æ</span></div>
            ${logicTags
                    ? `<div class="tag-list">${logicTags}</div>`
                    : '<div class="empty-note">–õ–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>'}
        </div>`;

            // Missing evidence
            let missingHtml = '';
            if (d.fact_check && d.fact_check.missing_evidence && d.fact_check.missing_evidence.length > 0) {
                const tags = renderTags(d.fact_check.missing_evidence, 'missing');
                missingHtml = `
            <div class="panel">
                <div class="panel-hdr"><span class="panel-title">‚ùì –ë–µ–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤</span></div>
                <div class="tag-list">${tags}</div>
            </div>`;
            }

            // Found evidence
            let foundEvidenceHtml = '';
            if (d.fact_check && d.fact_check.found_evidence && d.fact_check.found_evidence.length > 0) {
                let tags = '';
                d.fact_check.found_evidence.forEach(item => {
                    tags += `<div class="tag" style="background:rgba(74, 222, 128, 0.1);color:#4ade80;border:1px solid rgba(74,222,128,0.3)">${esc(item)}</div>`;
                });
                foundEvidenceHtml = `
            <div class="panel">
                <div class="panel-hdr"><span class="panel-title" style="color:#4ade80">‚úÖ –ù–∞–π–¥–µ–Ω—ã –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</span></div>
                <div class="tag-list">${tags}</div>
            </div>`;
            }

            container.innerHTML = `
        <div class="result-header" style="--score-color:${color}">
            <div class="rh-top">
                <div class="score-block">
                    <div class="score-number" id="score-num">0<span class="score-denom">/10</span></div>
                    <div class="score-bar-wrap">
                        <div class="score-bar-bg">
                            <div class="score-bar-fill" id="score-bar"></div>
                        </div>
                        <span class="score-bar-label">–î–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å</span>
                    </div>
                </div>
                <div class="verdict-block">
                    <div class="verdict-tag">${esc(verdict)}</div>
                    ${d.verdict_explanation ? `<div class="verdict-text">${esc(d.verdict_explanation)}</div>` : ''}
                </div>
            </div>
        </div>

        ${d.summary ? `
        <div class="panel">
            <div class="panel-hdr"><span class="panel-title">üìù –†–µ–∑—é–º–µ</span></div>
            <div class="panel-body">${esc(d.summary)}</div>
            ${breakdownHtml}
        </div>` : ''}

        ${foundEvidenceHtml}
        ${manipHtml}
        ${logicHtml}
        ${missingHtml}
        ${renderEvidence(d)}
        ${renderSources(d)}

        <div class="footer-bar">
            <div class="footer-brand">–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ <span>ANALYST</span> ¬∑ Text Analyzer</div>
            <a href="/" class="footer-cta">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—å—é ‚ñ∂</a>
        </div>`;

            // Animate score number
            let cur = 0;
            const target = s;
            const step = () => {
                if (cur < target) {
                    cur++;
                    document.getElementById('score-num').innerHTML = `${cur}<span class="score-denom">/10</span>`;
                    setTimeout(step, 60);
                }
            };
            step();

            // Animate bar
            setTimeout(() => {
                const bar = document.getElementById('score-bar');
                if (bar) bar.style.width = (s * 10) + '%';
            }, 100);
        }

        function showError(msg) {
            document.getElementById('container').innerHTML = `
        <div class="state-box error">
            <div class="msg">${esc(msg)}</div>
        </div>
        <div class="footer-bar" style="margin-top:.85rem">
            <div class="footer-brand">ANALYST <span>//</span> Text Analyzer</div>
            <a href="/" class="footer-cta">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—å—é ‚ñ∂</a>
        </div>`;
        }

        // Load data
        const id = location.pathname.split('/').filter(Boolean).pop();
        if (!id) {
            showError('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞');
        } else {
            fetch('/api/share/' + id)
                .then(r => {
                    if (!r.ok) throw new Error('–°—Å—ã–ª–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞ –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (404)');
                    return r.json();
                })
                .then(d => {
                    if (d.error) throw new Error(d.error);
                    render(d);
                })
                .catch(e => showError(e.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞'));
        }
    </script>
</body>

</html>